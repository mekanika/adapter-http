!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof window?window.rest=t():"undefined"!=typeof global?global.rest=t():"undefined"!=typeof self&&(self.rest=t())}(function(){var t;return function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){var r=t("mekanika-adapter"),i=t("./parsers"),s=t("superagent");e.exports=n=r("rest"),n.config={protocol:"http",host:"localhost",port:80,contentType:"application/json",withCredentials:!1,headers:{},query:t("./query.config")};var o={create:"post",find:"get",update:"post",save:"put",remove:"del"};n.exec=function(t,e){var r=n.config,a=i.url(t,r),l=o[t.action],c=s[l](a).set("Content-Type",r.contentType).set(r.headers).query(i.urlQuery(t,r.query)).send(i.payload(t));return r.withCredentials&&c.withCredentials&&(c=c.withCredentials()),c.end(function(t,n){e(t,n)})}},{"./parsers":2,"./query.config":3,"mekanika-adapter":5,superagent:8}],2:[function(t,e,n){function r(t,e,n){var r=o(t);return r[e]=n,r}function i(t,e,n){function r(n,r){var i=(t.opmap[e.operator]||"")+r;n=n.push(i)}var i=[];return e.condition instanceof Array?e.condition.forEach(function(t){r(i,t)}):r(i,e.condition),n[e.field]=void 0===n[e.field]?i.join(","):n[e.field]+","+i.join(","),n}function s(t,e,n){n[t.key]||(n[t.key]=[]);var r={};for(var i in e)r[t.map[i]||i]=e[i];return n[t.key].push(r),n}function o(t){var e=Object.prototype.toString;switch(e.call(t)){case"[object Object]":var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=o(t[r]));return n;case"[object Array]":for(var i=new Array(t.length),s=0,a=t.length;a>s;s++)i[s]=o(t[s]);return i;default:return t}}e.exports=n,n.urlQuery=function(t,e){var n={},r=[];if(t.display&&["limit","offset"].forEach(function(r){void 0!==t.display[r]&&(n[e.map[r]]=t.display[r])}),!t.constraints)return n;for(var o=0;o<t.constraints.length;o++){var a=t.constraints[o];e.pattern?r.push(e.pattern.replace("field",a.field).replace("operator",a.operator).replace("condition",a.condition)):n=e.key?s(e,a,n):i(e,a,n)}return e.pattern&&(n[e.key||"q"]="["+r.join(",")+"]"),n},n.url=function(t,e){var n=e.protocol+"://"+e.host;return e.port&&80!==e.port&&(n+=":"+e.port),n+="/"+(t.resource||""),t.identifiers&&1===t.identifiers.length&&(n+="/"+t.identifiers[0]),n},n.payload=function(t){if(void 0!==t.content){var e=t.identifiers;if(!e)return t.content.length>1?t.content:t.content[0];var n=t.idField||"id";if(t.content.length>1)throw new Error("Multiple ids and contents. Pick one or the other.");if(1===e.length)return r(t.content[0],n,e[0]);for(var i=[],s=0;s<e.length;s++)i.push(r(t.content[0],n,e[s]));return i}}},{}],3:[function(t,e){e.exports={key:"q",pattern:"",map:{field:"key",operator:"op",condition:"cnd",limit:"limit",offset:"offset"},opmap:{neq:"-",nin:"-",gt:">",lt:"<",gte:">=",lte:"<="}}},{}],4:[function(t,e,n){function r(t){this.identity=t,i.apply(this)}var i=t("eventemitter2").EventEmitter2,s=t("./utils").inherit;e.exports=n=r,s(r,i),r.EventEmitter=i,r.prototype.toString=function(){return"adapter('"+this.identity+"')"},r.prototype.config={},r.prototype.serialise=r.prototype.serialize={constraints:function(t){return t.constraints},display:function(t){return t.display},sort:function(t){return t.sort}},r.prototype.exec=function(){throw new Error("Adapter not implemented")}},{"./utils":6,eventemitter2:7}],5:[function(t,e,n){function r(t){if(s[t])return s[t];var e=new i(t);return s[t]=e,e.adapter=r,s[t]}var i=t("./adapter");e.exports=n=r,n.Adapter=i;var s={};r.flush=r.reset=function(){s={}},r.list=function(){var t=[];for(var e in s)"undefined"!==e&&t.push(e);return t},r.has=function(t){return s[t]?!0:!1}},{"./adapter":4}],6:[function(t,e,n){e.exports=n,n.inherit=function(t,e){var n=function(t){this.constructor=t};n.prototype=e.prototype,t.prototype=new n(t);for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}},{}],7:[function(e,n,r){var i=e("__browserify_process");!function(e){function n(){this._events={},this._conf&&r.call(this,this._conf)}function r(t){t&&(this._conf=t,t.delimiter&&(this.delimiter=t.delimiter),t.maxListeners&&(this._events.maxListeners=t.maxListeners),t.wildcard&&(this.wildcard=t.wildcard),t.newListener&&(this.newListener=t.newListener),this.wildcard&&(this.listenerTree={}))}function i(t){this._events={},this.newListener=!1,r.call(this,t)}function s(t,e,n,r){if(!n)return[];var i,o,a,l,c,h,u,f=[],p=e.length,d=e[r],y=e[r+1];if(r===p&&n._listeners){if("function"==typeof n._listeners)return t&&t.push(n._listeners),[n];for(i=0,o=n._listeners.length;o>i;i++)t&&t.push(n._listeners[i]);return[n]}if("*"===d||"**"===d||n[d]){if("*"===d){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(f=f.concat(s(t,e,n[a],r+1)));return f}if("**"===d){u=r+1===p||r+2===p&&"*"===y,u&&n._listeners&&(f=f.concat(s(t,e,n,p)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!u&&(f=f.concat(s(t,e,n[a],p))),f=f.concat(s(t,e,n[a],r))):f=a===y?f.concat(s(t,e,n[a],r+2)):f.concat(s(t,e,n[a],r)));return f}f=f.concat(s(t,e,n[d],r+1))}if(l=n["*"],l&&s(t,e,l,r+1),c=n["**"])if(p>r){c._listeners&&s(t,e,c,p);for(a in c)"_listeners"!==a&&c.hasOwnProperty(a)&&(a===y?s(t,e,c[a],r+2):a===d?s(t,e,c[a],r+1):(h={},h[a]=c[a],s(t,e,{"**":h},r+1)))}else c._listeners?s(t,e,c,p):c["*"]&&c["*"]._listeners&&s(t,e,c["*"],p);return f}function o(t,e){t="string"==typeof t?t.split(this.delimiter):t.slice();for(var n=0,r=t.length;r>n+1;n++)if("**"===t[n]&&"**"===t[n+1])return;for(var i=this.listenerTree,s=t.shift();s;){if(i[s]||(i[s]={}),i=i[s],0===t.length){if(i._listeners){if("function"==typeof i._listeners)i._listeners=[i._listeners,e];else if(a(i._listeners)&&(i._listeners.push(e),!i._listeners.warned)){var o=l;"undefined"!=typeof this._events.maxListeners&&(o=this._events.maxListeners),o>0&&i._listeners.length>o&&(i._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",i._listeners.length),console.trace())}}else i._listeners=e;return!0}s=t.shift()}return!0}var a=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},l=10;i.prototype.delimiter=".",i.prototype.setMaxListeners=function(t){this._events||n.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},i.prototype.event="",i.prototype.once=function(t,e){return this.many(t,1,e),this},i.prototype.many=function(t,e,n){function r(){0===--e&&i.off(t,r),n.apply(this,arguments)}var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return r._origin=n,this.on(t,r),i},i.prototype.emit=function(){this._events||n.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var e=arguments.length,r=new Array(e-1),i=1;e>i;i++)r[i-1]=arguments[i];for(i=0,e=this._all.length;e>i;i++)this.event=t,this._all[i].apply(this,r)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var o;if(this.wildcard){o=[];var a="string"==typeof t?t.split(this.delimiter):t.slice();s.call(this,o,a,this.listenerTree,0)}else o=this._events[t];if("function"==typeof o){if(this.event=t,1===arguments.length)o.call(this);else if(arguments.length>1)switch(arguments.length){case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(var e=arguments.length,r=new Array(e-1),i=1;e>i;i++)r[i-1]=arguments[i];o.apply(this,r)}return!0}if(o){for(var e=arguments.length,r=new Array(e-1),i=1;e>i;i++)r[i-1]=arguments[i];for(var l=o.slice(),i=0,e=l.length;e>i;i++)this.event=t,l[i].apply(this,r);return l.length>0||this._all}return this._all},i.prototype.on=function(t,e){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof e)throw new Error("on only accepts instances of Function");if(this._events||n.call(this),this.emit("newListener",t,e),this.wildcard)return o.call(this,t,e),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],e];else if(a(this._events[t])&&(this._events[t].push(e),!this._events[t].warned)){var r=l;"undefined"!=typeof this._events.maxListeners&&(r=this._events.maxListeners),r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=e;return this},i.prototype.onAny=function(t){if(this._all||(this._all=[]),"function"!=typeof t)throw new Error("onAny only accepts instances of Function");return this._all.push(t),this},i.prototype.addListener=i.prototype.on,i.prototype.off=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof t?t.split(this.delimiter):t.slice();r=s.call(this,null,i,this.listenerTree,0)}else{if(!this._events[t])return this;n=this._events[t],r.push({_listeners:n})}for(var o=0;o<r.length;o++){var l=r[o];if(n=l._listeners,a(n)){for(var c=-1,h=0,u=n.length;u>h;h++)if(n[h]===e||n[h].listener&&n[h].listener===e||n[h]._origin&&n[h]._origin===e){c=h;break}if(0>c)continue;return this.wildcard?l._listeners.splice(c,1):this._events[t].splice(c,1),0===n.length&&(this.wildcard?delete l._listeners:delete this._events[t]),this}(n===e||n.listener&&n.listener===e||n._origin&&n._origin===e)&&(this.wildcard?delete l._listeners:delete this._events[t])}return this},i.prototype.offAny=function(t){var e,n=0,r=0;if(t&&this._all&&this._all.length>0){for(e=this._all,n=0,r=e.length;r>n;n++)if(t===e[n])return e.splice(n,1),this}else this._all=[];return this},i.prototype.removeListener=i.prototype.off,i.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||n.call(this),this;if(this.wildcard)for(var e="string"==typeof t?t.split(this.delimiter):t.slice(),r=s.call(this,null,e,this.listenerTree,0),i=0;i<r.length;i++){var o=r[i];o._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},i.prototype.listeners=function(t){if(this.wildcard){var e=[],r="string"==typeof t?t.split(this.delimiter):t.slice();return s.call(this,e,r,this.listenerTree,0),e}return this._events||n.call(this),this._events[t]||(this._events[t]=[]),a(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},i.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof t&&t.amd?t(function(){return i}):e.EventEmitter2=i}("undefined"!=typeof i&&"undefined"!=typeof i.title&&"undefined"!=typeof r?r:window)},{__browserify_process:11}],8:[function(t,e){function n(){}function r(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function i(){if(v.XMLHttpRequest&&("file:"!=v.location.protocol||!v.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1}function s(t){return t===Object(t)}function o(t){if(!s(t))return t;var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function a(t){for(var e,n,r={},i=t.split("&"),s=0,o=i.length;o>s;++s)n=i[s],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r}function l(t){var e,n,r,i,s=t.split(/\r?\n/),o={};s.pop();for(var a=0,l=s.length;l>a;++a)n=s[a],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),i=_(n.slice(e+1)),o[r]=i;return o}function c(t){return t.split(/ *; */).shift()}function h(t){return y(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(t[r]=i),t},{})}function u(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text=this.xhr.responseText,this.setStatusProperties(this.xhr.status),this.header=this.headers=l(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body=this.parseBody(this.text)}function f(t,e){var n=this;d.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var e=new u(n);"HEAD"==t&&(e.text=null),n.callback(null,e)})}function p(t,e){return"function"==typeof e?new f("GET",t).end(e):1==arguments.length?new f("GET",t):new f(t,e)}var d=t("emitter"),y=t("reduce"),v="undefined"==typeof window?this:window,_="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};p.serializeObject=o,p.parseString=a,p.types={html:"text/html",json:"application/json",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},p.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},p.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},u.prototype.get=function(t){return this.header[t.toLowerCase()]},u.prototype.setHeaderProperties=function(){var t=this.header["content-type"]||"";this.type=c(t);var e=h(t);for(var n in e)this[n]=e[n]},u.prototype.parseBody=function(t){var e=p.parse[this.type];return e?e(t):null},u.prototype.setStatusProperties=function(t){var e=0|t/100;this.status=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t||1223==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},u.prototype.toError=function(){var t=this.req,e=t.method,n=t.path,r="cannot "+e+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=e,i.path=n,i},p.Response=u,d(f.prototype),f.prototype.timeout=function(t){return this._timeout=t,this},f.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},f.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},f.prototype.set=function(t,e){if(s(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},f.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},f.prototype.type=function(t){return this.set("Content-Type",p.types[t]||t),this},f.prototype.auth=function(t,e){var n=btoa(t+":"+e);return this.set("Authorization","Basic "+n),this},f.prototype.query=function(t){return"string"!=typeof t&&(t=o(t)),t&&this._query.push(t),this},f.prototype.send=function(t){var e=s(t),n=this.getHeader("Content-Type");if(e&&s(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this.getHeader("Content-Type"),this._data="application/x-www-form-urlencoded"==n?this._data?this._data+"&"+t:t:(this._data||"")+t):this._data=t;return e?(n||this.type("json"),this):this},f.prototype.callback=function(t,e){var n=this._callback;return 2==n.length?n(t,e):t?this.emit("error",t):(n(e),void 0)},f.prototype.crossDomainError=function(){var t=new Error("Origin is not allowed by Access-Control-Allow-Origin");t.crossDomain=!0,this.callback(t)},f.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},f.prototype.withCredentials=function(){return this._withCredentials=!0,this},f.prototype.end=function(t){var e=this,s=this.xhr=i(),o=this._query.join("&"),a=this._timeout,l=this._data;if(this._callback=t||n,this._withCredentials&&(s.withCredentials=!0),s.onreadystatechange=function(){return 4==s.readyState?0==s.status?e.aborted?e.timeoutError():e.crossDomainError():(e.emit("end"),void 0):void 0},s.upload&&(s.upload.onprogress=function(t){t.percent=100*(t.loaded/t.total),e.emit("progress",t)}),a&&!this._timer&&(this._timer=setTimeout(function(){e.abort()},a)),o&&(o=p.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),s.open(this.method,this.url,!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof l&&!r(l)){var c=p.serialize[this.getHeader("Content-Type")];c&&(l=c(l))}for(var h in this.header)null!=this.header[h]&&s.setRequestHeader(h,this.header[h]);return s.send(l),this},p.Request=f,p.get=function(t,e,n){var r=p("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},p.head=function(t,e,n){var r=p("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},p.del=function(t,e){var n=p("DELETE",t);return e&&n.end(e),n},p.patch=function(t,e,n){var r=p("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},p.post=function(t,e,n){var r=p("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},p.put=function(t,e,n){var r=p("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},e.exports=p},{emitter:9,reduce:10}],9:[function(t,e){function n(t){return t?r(t):void 0}function r(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}e.exports=n,n.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},e._off=n,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;var r=n.indexOf(e._off||e);return~r&&n.splice(r,1),this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],10:[function(t,e){e.exports=function(t,e,n){for(var r=0,i=t.length,s=3==arguments.length?n:t[r++];i>r;)s=e.call(null,s,t[r],++r,t);return s}},{}],11:[function(t,e){var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){if(t.source===window&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var e=n.shift();e()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}]},{},[1])(1)});